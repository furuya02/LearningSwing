<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create_run_jar" name="Create Runnable Jar for Project LearningSwing">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--ANT 1.7 is required -->
	<property name="compiler" value="c:\Program Files\Java\jdk1.7.0_04\bin\javac.exe" />
	<property name="output_dir" value="C:/tmp2/out"/>
	<property name="project_dir" value="C:/tmp2/LearningSwing"/>
	
	<target name="create_run_jar">

		<!-- 再構築 -->
		<mkdir dir="${output_dir}"/>
		<mkdir dir="${output_dir}/plugins"/>
		
		<delete verbose="true">
			<fileset dir="${project_dir}/bin" />
			<fileset dir="${output_dir}" />
	    </delete>
		<javac fork="true" encoding="utf-8" srcdir="${project_dir}/src" 
				destdir="${project_dir}/bin" includeantruntime="false">
			<classpath>
				<pathelement path="${project_dir}/lib/*"/>
				<pathelement location="c:/tmp2/out/plugins/sample.jar"/>
			</classpath>
		</javac>
				

		<!-- sample.jar -->      	
		<jar destfile="${output_dir}/plugins/sample.jar">
            <fileset dir="${project_dir}/bin/bjd/plugins/sample/"/>
        </jar>

		<!-- web.jar -->      	
		<jar destfile="${output_dir}/plugins/web.jar">
            <fileset dir="${project_dir}/bin/bjd/plugins/web/"/>
        </jar>
		
		<delete verbose="true">
			<!--pluginコードの削除 -->
			<fileset dir="${project_dir}/bin/bjd/plugins" />
			<!--テストコードの削除 -->
			<fileset dir="${project_dir}/bin" includes="**/*Test*" /> 
	    </delete>

		<jar destfile="${output_dir}/BlackJumboDog.jar" filesetmanifest="mergewithoutmain">
            <manifest>
                <attribute name="Main-Class" value="bjd.MainForm"/>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="${project_dir}/bin"/>
            <!-- <zipfileset excludes="META-INF/*.SF" src="C:/eclipse/plugins/org.junit_4.8.2.v4_8_2_v20110321-1705/junit.jar"/> -->
            <zipfileset excludes="META-INF/*.SF" src="C:/eclipse/plugins/org.hamcrest.core_1.1.0.v20090501071000.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="${project_dir}/lib/mail.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="${project_dir}/lib/activation.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="${project_dir}/lib/commons-codec-1.6.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="${project_dir}/lib/jfontchooser-1.0.5.jar"/>
        </jar>

    </target>
</project>


<!--
		<javac fork="true" encoding="utf-8" srcdir="${project_dir}/src" 
				destdir="${project_dir}/bin" includeantruntime="false" classpath="${project_dir}/lib/*"/>
-->
